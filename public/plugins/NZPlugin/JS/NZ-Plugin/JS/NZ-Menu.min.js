(function(a){a.fn.NZ_Menu=function(e){var c={items:[],fatype:"fas",bgcolor:"#fff",showbefore:null,showafter:null,closed:null};var b=a.extend({},c,e);if(b.items.length===0){alert("没有找到菜单项！");return false}a(this).contextmenu(function(i){var f=a(this);if(f.data("nzmenuid")===null||typeof f.data("nzmenuid")==="undefined"){f.data("nzmenuid",d())}a(".NZ-Menu").each(function(){if(a(this).data("nzmenuid")===f.data("nzmenuid")){a(this).off("animationend webkitAnimationEnd").addClass("NZ-Menu-hidemenu").on("animationend webkitAnimationEnd",function(){a(this).remove()})}});if(typeof b.showbefore==="function"){b.showbefore()}var g=h(b.items);function h(m){var j=a('<ul class="NZ-Menu"></ul>');var k=a('<li class="hoverlayer"></li>');j.append(k).mouseleave(function(){k.css({opacity:0})}).data("nzmenuid",f.data("nzmenuid"));var l=false;a.each(m,function(p,r){var q=a('<li class="NZ-Menu-motion NZ-Menu-showitem">'+r.name+"</li>");if(typeof r.attrlist!=="undefined"&&r.attrlist!==null&&r.attrlist.length>0){for(var n=0;n<r.attrlist.length;n++){q.attr(r.attrlist[n].name,r.attrlist[n].val)}}if(typeof r.classlist!=="undefined"&&r.classlist!==null&&r.classlist.length>0){for(var o=0;o<r.classlist.length;o++){q.addClass(r.classlist[o])}}if(typeof r.menu==="object"&&r.menu!==null&&r.menu.length>0){q.addClass("nextmenu")}if(typeof r.icon!=="undefined"&&r.icon!==null&&r.icon!==""){q.append('<i class="'+b.fatype+" "+r.icon+'"></i>');l=true}else{if(typeof r.imgicon!=="undefined"&&r.imgicon!==null&&r.imgicon!==""){q.append('<img src="'+r.imgicon+'" />')}}q.click(function(s){if(typeof r.event==="function"){r.event()}s.stopPropagation()}).mouseenter({e:k},function(t){t.data.e.css({opacity:1,top:a(this).position().top,height:a(this).outerHeight()});if(a(this).hasClass("nextmenu")){var s=h(r.menu);s.addClass("NZ-Menu-motion NZ-Menu-showmenu");q.append(s)}}).mouseleave(function(){if(a(this).hasClass("nextmenu")){a(this).find(".NZ-Menu").removeClass("NZ-Menu-showmenu").addClass("NZ-Menu-hidemenu").on("animationend webkitAnimationEnd",function(){a(this).remove()})}}).css({"animation-delay":(0.1*p)+"s"}).on("animationend webkitAnimationEnd",function(s){s.stopPropagation()});j.append(q)});if(l){j.find("li").addClass("item-icon")}return j}a(document.body).append(g);g.css({left:i.pageX,top:i.pageY});g.addClass("NZ-Menu-motion NZ-Menu-showmenu").on("animationend webkitAnimationEnd",function(){if(typeof b.showafter==="function"){b.showafter()}a(this).removeClass("NZ-Menu-showmenu")});a(document).bind("mousedown.nzmenu",function(j){switch(j.which){case 1:a(".NZ-Menu").each(function(k){a(this).off("animationend webkitAnimationEnd").css({"animation-delay":(k*0.1+0.2)+"s"}).addClass("NZ-Menu-hidemenu").on("animationend webkitAnimationEnd",function(){if(typeof b.closed==="function"){b.closed()}a(this).remove()})});a(document).unbind("click.nzmenu");break;case 3:break;case 2:break;default:break}});return false});function d(){return"NZ-MENU-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var g=Math.random()*16|0,h=f==="x"?g:(g&3|8);return h.toString(16)})}}})(jQuery);